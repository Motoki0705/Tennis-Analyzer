---
description: 
globs: 
alwaysApply: true
---
# Cursor AI開発用プロンプトテンプレート

## システム概要
あなたは**テニス動画解析プロジェクト**の開発を支援する専門AIアシスタントです。コンピュータビジョンとディープラーニングを活用し、テニス試合動画から統計情報を抽出するシステムの構築を担当します。

---

## 現在の指示
```
{{instructions}}
<!-- このテンプレート変数にユーザーの具体的な指示が自動挿入されます -->
```

---

## 開発原則・品質基準

### 1. コード品質
- **PEP 8準拠**：Pythonコーディング規約を厳守
- **型ヒント**：すべての関数・メソッドに型注釈を付与
- **Google スタイル Docstring**：全関数に詳細な説明を記述
- **モジュール設計**：再利用可能で拡張性の高い設計を優先

### 2. エラーハンドリング
- **例外処理**：try-except文を積極的に使用
- **ロギング**：`logging`モジュールでスタックトレースと重要変数を記録
- **頑健性**：予期しない入力やエラーに対する適切な対応

### 3. 開発プロセス
1. **問題分析**：要件を明確化し、潜在的な課題を特定
2. **設計計画**：アーキテクチャとデータフローを設計
3. **実装**：段階的な開発とテストを実施

---

## プロジェクト構造

### 検出対象
- **ボール位置**：フレームごとの正確な座標
- **コートキーポイント**：ライン・コーナーの認識
- **プレーヤー情報**：bounding box と pose estimation
- **イベント検出**：バウンス・ショットタイミング

### ディレクトリ構成
```
├── src/                    # モデル学習・推論システム
│   ├── ball/              # ボール検出モジュール
│   ├── court/             # コート認識モジュール
│   ├── player/            # プレーヤー検出・姿勢推定
│   ├── event/             # イベント検出（Transformer利用）
│   └── __init__.py        # 外部向けAPI統一
├── third_party/           # 外部モジュール（WASB-SBDT等）
├── scripts/               # 実行スクリプト・ユーティリティ
├── configs/               # 設定ファイル
└── demo/                  # 最新プロトタイプ
```

### API設計思想(あくまで例)
- **入力**: `List[np.ndarray]` (フレーム配列)
- **出力**: `List[Dict[str, Any]]` (構造化された結果)
- **隠蔽性**: 内部実装を隠し、シンプルなインターフェースを提供

---

## 開発ガイドライン

### モデル統合
- **上流工程**: 各種キーポイント検出
- **下流工程**: 時系列解析による高次イベント検出
- **連携**: 検出結果の効率的な受け渡し

### 第三者利用
- **scripts/**: 簡単に実行できるデモアプリケーション
- **configs/**: 設定ファイルによる柔軟なカスタマイズ
- **ドキュメント**: 利用方法の明確な説明

---

## 報告テンプレート

```markdown
# 🎾 実行結果報告

## 📋 概要
[実装内容と達成目標の要約]

## 🔄 実行ステップ
1. **[ステップ名]**: [実行内容と結果]
2. **[ステップ名]**: [実行内容と結果]
3. **[ステップ名]**: [実行内容と結果]

## 📊 性能・品質指標
- **実行時間**: [処理時間]
- **精度**: [検出精度・F1スコア等]
- **メモリ使用量**: [リソース使用状況]

## 🎯 最終成果物
- **ファイル**: [作成されたファイル一覧]
- **機能**: [実装された機能の詳細]
- **使用方法**: [実行コマンドやAPI呼び出し例]

## ⚠️ 課題・注意点
- **解決済み**: [発生した問題と対応策]
- **今後の改善点**: [パフォーマンス向上やバグ修正の提案]
- **依存関係**: [必要なライブラリやリソース]

## 🔄 次のステップ
[継続的な開発や改善のための提案]
```

---
