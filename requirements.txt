# Combined Requirements for Tennis Event Annotation System with ML Development
# Updated to include all missing dependencies and resolve compatibility issues

# ============================================================================
# Core Web Framework
# ============================================================================
fastapi==0.104.1
uvicorn[standard]==0.24.0
python-multipart==0.0.6
gradio>=4.0.0,<5.0.0  # Interactive ML model interfaces

# ============================================================================
# Data Handling & Numerical Computation (NumPy 1.x compatibility)
# ============================================================================
pydantic==2.5.0
numpy>=1.21.0,<2.0.0  # Explicit NumPy 1.x to avoid OpenCV compatibility issues
pandas>=2.0.0,<3.0.0
scipy>=1.10.0,<2.0.0

# ============================================================================
# Configuration Management (Required for WASB-SBDT and Hydra)
# ============================================================================
omegaconf>=2.3.0,<3.0.0  # Essential for configuration management
hydra-core>=1.3.0,<2.0.0  # Depends on omegaconf
pyyaml>=6.0.0  # Required by omegaconf and hydra

# ============================================================================
# Machine Learning & Deep Learning Frameworks
# ============================================================================
# PyTorch Ecosystem
torch>=2.1.0,<2.3.0
torchvision>=0.16.0,<0.18.0
torchaudio>=2.1.0,<2.3.0

# PyTorch Lightning and Dependencies
pytorch-lightning>=2.0.0,<3.0.0  # Previously missing - CRITICAL
lightning>=2.0.0  # New Lightning package structure
torchmetrics>=1.0.0  # Required by pytorch-lightning

# Traditional ML
scikit-learn>=1.3.0,<2.0.0

# ============================================================================
# Experiment Tracking & MLOps
# ============================================================================
wandb>=0.16.0  # Experiment tracking
tensorboard>=2.14.0  # TensorBoard logging (used by Lightning)

# ============================================================================
# Image & Video Processing
# ============================================================================
opencv-python>=4.8.0,<5.0.0  # Compatible with NumPy 1.x
Pillow>=10.0.0,<11.0.0
albumentations>=1.3.0,<2.0.0

# Video processing
ffmpeg-python>=0.2.0
aiofiles>=23.2.0

# ============================================================================
# Hugging Face Ecosystem
# ============================================================================
transformers>=4.30.0,<5.0.0
datasets>=2.14.0,<3.0.0
huggingface-hub>=0.17.0
tokenizers>=0.13.0  # Required by transformers

# ============================================================================
# Data Visualization
# ============================================================================
matplotlib>=3.7.0,<4.0.0
seaborn>=0.12.0,<1.0.0
plotly>=5.15.0  # Additional visualization option

# ============================================================================
# Utilities & Support Libraries
# ============================================================================
tqdm>=4.65.0
ipykernel>=6.25.0  # For Jupyter notebook support
python-dotenv>=1.0.0
requests>=2.31.0  # HTTP requests
psutil>=5.9.0  # System monitoring (used by Lightning)

# JSON and serialization
jsonschema>=4.17.0  # Configuration validation
packaging>=23.0  # Version parsing and comparison

# ============================================================================
# Additional Dependencies for Advanced Features
# ============================================================================
# Distributed training support
fsspec>=2023.6.0  # File system abstraction (used by Lightning)

# Advanced optimizers
timm>=0.9.0  # PyTorch Image Models (optional but useful)

# Data loading and processing
webdataset>=0.2.0  # Efficient data loading for large datasets

# ============================================================================
# Development & Testing Tools
# ============================================================================
pytest>=7.4.0,<8.0.0
pytest-cov>=4.1.0  # Coverage reporting
black>=23.9.0,<24.0.0
flake8>=6.0.0,<7.0.0
isort>=5.12.0  # Import sorting
mypy>=1.5.0  # Type checking

# ============================================================================
# Optional: Jupyter and Notebook Support
# ============================================================================
jupyter>=1.0.0
notebook>=7.0.0
ipywidgets>=8.1.0

# ============================================================================
# Performance & Optimization
# ============================================================================
# Accelerated computation
numba>=0.57.0,<0.60.0  # JIT compilation for numerical functions (version constrained for compatibility)

# Memory profiling (development)
memory-profiler>=0.61.0

# ============================================================================
# Additional ML/DL Libraries (Optional but Recommended)
# ============================================================================
# Computer Vision
kornia>=0.7.0  # Computer vision library for PyTorch

# Audio processing (if needed)
librosa>=0.10.0  # Audio analysis
soundfile>=0.12.0  # Audio file I/O

# ============================================================================
# Version Compatibility Notes
# ============================================================================
# This requirements.txt is designed with the following compatibility strategy:
# 1. NumPy 1.x compatibility to avoid OpenCV issues
# 2. PyTorch 2.1+ for modern features while maintaining stability  
# 3. All major dependencies explicitly versioned to prevent conflicts
# 4. Range specifications allow security updates while preventing breaking changes
#
# Installation Notes:
# 1. For GPU support, install PyTorch from official website FIRST
# 2. Consider using virtual environment: python -m venv .venv
# 3. Install in order: pip install -r requirements.txt
# 4. Verify installation: python -c "import pytorch_lightning; print('Success!')"