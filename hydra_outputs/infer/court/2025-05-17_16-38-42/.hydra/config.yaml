mode: court
common:
  device: cpu
  use_half: false
  batch_size: 1
input_path: data/test/video_input2.mp4
output_path: outputs/${mode}/${now:%Y-%m-%d_%H-%M-%S}.mp4
output_jsonl_path: null
processors:
  player:
    _target_: transformers.AutoImageProcessor.from_pretrained
    pretrained_model_name_or_path: PekingU/rtdetr_v2_r18vd
  pose:
    _target_: transformers.AutoImageProcessor.from_pretrained
    pretrained_model_name_or_path: usyd-community/vitpose-base-simple
predictors:
  ball:
    _target_: src.ball.predictor.BallPredictor
    input_size:
    - 360
    - 640
    heatmap_size:
    - 360
    - 640
    num_frames: 3
    threshold: 0.6
    visualize_mode: overlay
  court:
    _target_: src.court.predictor.CourtPredictor
    input_size:
    - 360
    - 640
    num_keypoints: 15
    threshold: 0.5
    visualize_mode: heatmap_channels
  player:
    _target_: src.player.predictor.PlayerPredictor
    label_map:
      0: player
    threshold: 0.5
  pose:
    _target_: src.pose.predictor.PosePredictor
    player_label_id: 0
    det_score_thresh: 0.6
    pose_score_thresh: 0.6
  multi:
    _target_: src.multi.multi_predictor.MultiPredictor
    ball_interval: 1
    court_interval: 1
    pose_interval: 1
    ball_batch_size: 16
    court_batch_size: 16
    pose_batch_size: 16
  frames_annotator:
    _target_: src.multi.frames_predictor.FrameAnnotator
    intervals:
      ball: 1
      court: 1
      pose: 1
    batch_sizes:
      ball: 16
      court: 16
      poose: 16
    frame_fmt: frame_{:06d}.jpg
ball:
  _target_: src.ball.models.cat_frames.lite_tracknet.LiteBallTracker
  ckpt_path: checkpoints/ball/lite_tracknet/lite_tracknet-epoch=46-val_loss=0.0000.ckpt
court:
  _target_: src.court.models.lite_tracknet.LiteBallTracker
  in_channels: 3
  heatmap_channels: 1
  ckpt_path: checkpoints/court/lite_tracknet_1heat/court-epoch=49-val_loss=0.000114.ckpt
player:
  _target_: transformers.RTDetrV2ForObjectDetection.from_pretrained
  pretrained_model_name_or_path: PekingU/rtdetr_v2_r18vd
  num_labels: 1
  ignore_mismatched_sizes: true
  ckpt_path: checkpoints/player/rt_detr_tracking/best-epoch=05-val_loss_total=2.2782.ckpt
pose:
  _target_: transformers.VitPoseForPoseEstimation.from_pretrained
  pretrained_model_name_or_path: usyd-community/vitpose-base-simple
